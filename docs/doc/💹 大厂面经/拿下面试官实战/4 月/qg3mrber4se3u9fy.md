---
title: 4/23 阿里云又崩啦！一次逆天的技术拷打
urlname: qg3mrber4se3u9fy
date: '2024-06-13 21:14:39'
updated: '2024-06-13 21:14:47'
cover: 'https://cdn.nlark.com/yuque/0/2024/png/22382235/1714051311931-d9936783-75af-4bd5-90bf-ae925e670076.png'
description: 在科技世界的舞台上，我们会经常看到一些出人意料的事件。前不久，阿里旗下的淘宝、闲鱼、阿里云盘、饿了么、钉钉等产品突然出现了崩溃，引发了广泛的关注和热议。“阿里全系产品崩了”，这一话题在微博上迅速登上了热搜。阿里云作为国内的云计算领军者，一直以来都处于遥遥领先的位置。然而，这次的全系产品崩溃事件...
---

在科技世界的舞台上，我们会经常看到一些出人意料的事件。

前不久，**阿里旗下的淘宝、闲鱼、阿里云盘、饿了么、钉钉等产品突然出现了崩溃**，引发了广泛的关注和热议。“阿里全系产品崩了”，这一话题在微博上迅速登上了热搜。
![image.png](https://oss1.aistar.cool/elog-offer-now/f3c20b29051d944d49c0f50be5a98c7e.png)
阿里云作为国内的云计算领军者，一直以来都处于遥遥领先的位置。然而，这次的全系产品崩溃事件，无疑给阿里云带来了巨大的挑战。**在这个科技巨头们纷纷投入重兵的云计算领域，阿里云的优势是否还能维持下去？它的未来又将何去何从？**

云计算技术正在飞速发展，各大公司都在抢占这个风口。其中，阿里云作为国内最大的云服务提供商，近期也有不少大动作。据我了解，阿里云最近正在推进在鹤壁市的创新中心项目，这个项目落地后，将有助于形成5G应用产业集群和5G应用产业人才聚集中心[[1]](#fn1)。

此外，阿里云还在积极尝试将云计算技术应用于各种场景，比如电商、物联网、新金融等[[2]](#fn2)。

可以说，阿里云的发展势头非常猛烈，对于想要投身云计算行业的同学来说，阿里云无疑是一个非常好的选择。

然后大家知道，技术面试是每个求职者都会经历的一道关卡，不同的公司、不同的职位，面试的形式和内容都会有所不同。今天分享一位同学在阿里云面试时的经历。

这次面试可谓是“找实习最逆天的一次拷打”，面试官从头到尾都在不断地提问，而且问题都非常有深度，涉及到了很多计算机科学的基础知识。现在，我们就来一起看看这次面试都发生了什么吧。

---


**面试官**: 你好，欢迎来到阿里云的面试。首先，我想知道你对**get和post的本质区别**有什么看法？ 

**求职者**: 嗯，get和post都是HTTP协议中的请求方法。本质上，get请求通常用于请求数据，它将请求参数附加在URL后面，因此有长度限制并且可以被缓存和收藏为书签。而post请求通常用于提交数据，参数包含在请求体中，没有长度限制，更适合传输敏感或大量数据。 

**面试官**: 那么，**http和rpc的本质区别**是什么呢？ 

**求职者**: http是一种无状态的请求/响应协议，主要用于web服务之间的通信。而rpc（Remote Procedure Call）是一种协议，它允许一个程序调用另一个地址空间（通常是在远程服务器上）的程序，就像调用本地服务一样。rpc通常涉及序列化和反序列化的过程，并且它是建立在诸如http、TCP等其他协议之上的。 

**面试官**: 当你在浏览器中输入一个url会发生什么？ 

**求职者**: 输入URL后，浏览器会进行DNS解析以获取URL对应的IP地址，然后建立TCP连接（通常是三次握手过程），接着发送HTTP请求。服务器处理请求并返回HTTP响应，浏览器接收到数据后，解析HTML、CSS和JavaScript等内容，最终渲染出页面。 

**面试官**: 如果直接在浏览器输入IP地址呢？ 

**求职者**: 如果直接输入IP地址，浏览器会跳过DNS解析的步骤，直接尝试建立TCP连接。但是，如果服务器上运行着多个虚拟主机，那么仅凭IP地址可能无法确定要请求的具体网站内容，因为HTTP请求的Host头部通常用于指定服务器上的特定网站。

**面试官**: 那DNS解析设计有递归和迭代两种方式，为什么要这样设计呢？ 

**求职者**: 这样的设计允许DNS查询过程更加灵活和高效。递归查询可以简化客户端的查询过程，因为客户端只需要向其本地DNS服务器发送一次请求，剩下的查询过程由DNS服务器完成。而迭代查询可以减轻单个DNS服务器的负担，因为每次查询都是由客户端逐步向不同的DNS服务器发起的。两者各有优势，通常结合使用以提高DNS的性能和可靠性。 

**面试官**: 接下来，让我们聊聊TCP。**为什么TCP要进行三次握手，两次不行吗？**

**求职者**: TCP三次握手的主要目的是确保双方的发送和接收能力都是正常的。两次握手无法保证双方的接收能力。比如，客户端发送连接请求给服务器，服务器响应表示愿意建立连接。如果只有这两次交互，服务器无法确定客户端是否能接收到它的响应。而通过第三次握手，客户端再次确认已经收到服务器的响应，这样双方就都确认了对方的发送和接收能力是正常的。 

**面试官**: 那第三次握手除了防止已失效的连接请求重复连接到服务器，还有别的原因吗？ 

**求职者**: 除了防止已失效的连接请求之外，第三次握手还有助于同步双方的初始序列号，为可靠的数据传输奠定基础。通过在握手过程中交换序列号信息，客户端和服务器都可以确保数据包的顺序和完整性。 

**面试官**: 聊聊**并发**。**HashMap是不是线程安全的？如果让你来实现一个线程安全的HashMap，你会怎么设计？**

**求职者**: HashMap本身是不线程安全的。要实现一个线程安全的HashMap，可以采用几种策略：一种是使用Collections.synchronizedMap将HashMap包装成同步的；另一种是使用ConcurrentHashMap，它通过分段锁技术提供更高的并发性。如果不使用锁，也可以考虑使用原子引用和CAS操作来保证操作的原子性，但这通常会复杂很多。 

**面试官**: **JUC**知道吗？在JUC下最重要的类是哪一个？ 

**求职者**: JUC，即Java并发工具包(java.util.concurrent)，为并发编程提供了许多强大的工具类。其中最重要的类可能是ConcurrentHashMap，因为它提供了高效的线程安全的HashMap实现。此外，ReentrantLock、CountDownLatch、CyclicBarrier、Semaphore等都是非常重要和常用的，并发控制机制。 

**面试官**: Java中有哪些**加锁的方式**？除了synchronized和ReentrantLock还有别的吗？ 

**求职者**: Java中常用的加锁方式主要有synchronized关键字和ReentrantLock。此外，还有ReadWriteLock读写锁，它允许多个读线程同时访问，但写线程访问时会独占锁。还有StampedLock，它提供了一种乐观的读策略，这可以在一定条件下提高并发性能。 

**面试官**: **JVM了解吗？JVM垃圾回收讲一下。**

**求职者**: 是的，JVM通过垃圾回收（GC）机制自动管理内存。主要的GC算法有标记-清除、标记-整理、复制算法等。JVM分为几个主要区域，包括年轻代、老年代等，GC过程中可能涉及Minor GC和Major GC，其中Minor GC清理年轻代，Major GC清理老年代。从JDK 1.7开始，HotSpot VM引入了G1 GC，它将堆划分为多个小区域，通过并发和增量的方式减少停顿时间。 

**面试官**: 在JVM垃圾回收的时候，有那么多**GC Roots**，怎么快速定位到GC Roots的？ 

**求职者**: JVM在垃圾回收时会使用一组称为GC Roots的对象作为起点进行可达性分析。为了快速定位到GC Roots，JVM维护了一组固定的GC Roots集合，包括正在执行的方法的局部变量和输入参数、活动线程、类的静态字段以及JNI引用等。JVM通过这些点作为起始点，使用专门的算法快速遍历并标记所有从这些点可达的对象。 

**面试官**: **堆外内存**有什么作用？ 

**求职者**: 堆外内存是直接使用操作系统的内存，不受JVM堆大小的限制，通常用于缓存大量数据或进行网络IO操作。使用堆外内存可以避免JVM堆内存的GC压力，提高性能。但是，堆外内存的管理需要程序员手动控制，如果管理不当，可能会导致内存泄漏。 

**面试官**: 如果**分布式锁**服务器挂了怎么办？ 

**求职者**: 如果分布式锁服务依赖的服务器出现故障，可以采用多种策略来保证服务的可用性和一致性。比如使用主从复制或者多副本策略，当主服务器不可用时，备用服务器可以接管服务。此外，还可以结合使用心跳检测和选举算法，比如Paxos或Raft算法，来选举新的主服务器，确保分布式锁服务的高可用性。 

**面试官**: Redis为什么可以用来作**分布式锁**？ 

**求职者**: Redis之所以可以用作分布式锁，是因为它提供了一些原子操作，如SETNX（Set if not exists）和EXPIRE，可以用来实现锁的设定和自动释放。而且Redis是单线程的，所以命令执行有序，不会出现并发冲突。此外，Redis的性能高，响应速度快，适合分布式环境中的锁服务。 

**面试官**: 既然Redis是单线程的，那它挂了岂不是拿不到锁了？ 

**求职者**: 如果Redis单点服务挂掉，确实会影响到分布式锁的获取。为了解决这个问题，可以使用Redis的高可用方案，如哨兵模式或者Redis集群，确保当一个Redis节点不可用时，其他节点可以继续提供服务。 

**面试官**: RabbitMQ如何保证消息**顺序性**？你项目里面说你实现了用户点赞功能，如果用户频繁点赞取消，那你如何保证点赞和取消赞的顺序是一致的，保证最终结果的正确性？ 

**求职者**: RabbitMQ保证消息顺序性的一种方法是使用单一消费者和单一队列，这样消息就会按照发送的顺序被消费。在用户点赞的场景中，我会使用消息队列来串行处理用户的点赞和取消赞操作，保证操作顺序。此外，还可以在消息中包含一个时间戳或者序列号，以确保即使消息在处理过程中出现乱序，也可以根据这些信息重新排序，保证最终结果的一致性。 

**面试官**: 很好，等通知吧。
