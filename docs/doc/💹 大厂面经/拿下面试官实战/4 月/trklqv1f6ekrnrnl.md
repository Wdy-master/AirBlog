---
title: 4/3 蚂蚁一面：揭秘蚂蚁一面：你真的懂MySQL和Redis吗？
urlname: trklqv1f6ekrnrnl
date: '2024-06-13 21:14:41'
updated: '2024-06-13 21:14:49'
description: 咱们来分享一位同学在蚂蚁金服的一面面试经历，这位同学对这次面试的评价是：考察宽广深刻，需要将知识点串联起来。那么，你准备好挑战自己的知识体系了吗？【提醒】通过这次面试经验，你将可以复习到以下知识点：Docker与虚拟机的区别Kubernetes的核心组件令牌桶算法与压力测试Redis的持久化和...
---
咱们来分享一位同学在蚂蚁金服的一面面试经历，这位同学对这次面试的评价是：**考察宽广深刻，需要将知识点串联起来**。那么，你准备好挑战自己的知识体系了吗？

【提醒】通过这次面试经验，你将可以复习到以下知识点：

- **Docker与虚拟机的区别**
- **Kubernetes的核心组件**
- **令牌桶算法与压力测试**
- **Redis的持久化和一致性问题**
- **MySQL的存储引擎及事务隔离级别**
- **TCP/IP协议栈及其相关协议应用**
- **Linux系统中的I/O多路复用和进程通信机制**
- **对人工智能的看法**


![](https://oss1.aistar.cool/elog-offer-now/e7c98c16527500506b450f4b003ecc99.png)

**面试官**: 你好，欢迎来到蚂蚁金服的面试。首先，从你的项目经历开始，你能谈谈**项目部署上线时**遇到的一些问题及解决方案吗？

**求职者**: 当然可以。在项目部署上线的过程中，我遇到了一些典型问题，比如配置不一致、服务依赖不明确等。为了解决这些问题，我们使用了Docker容器来保证环境一致性，并通过服务编排工具，如Kubernetes，来管理服务的依赖和自动扩展。

**面试官**: 提到了Docker，那你能说说**Docker和虚拟机的主要区别**吗？

**求职者**: Docker容器与虚拟机的主要区别在于它们的虚拟化层面。Docker容器是在操作系统层面上进行虚拟化，共享同一内核，而虚拟机则是在硬件层面上进行虚拟化，每个虚拟机都有独立的操作系统。因此，Docker容器启动更快，资源开销更小，密度更高。

**面试官**: 明白了。聊一聊你对**Kubernetes（k8s）的理解**，它包含哪些核心组件？

**求职者**: Kubernetes是一个开源的容器编排工具，它由多个核心组件组成。包括**API服务器**, **调度器**, **控制器管理器**, 和**etcd**（用于存储集群状态的键值存储）。此外，还有**kubelet**（在每个节点上运行，管理容器的生命周期）和**kube-proxy**（负责网络通信和负载均衡）等。

**面试官**: 谈谈你的项目中是怎么应用**令牌桶算法来限流**的？你们是如何做压力测试的？

**求职者**: 在我们的项目中，我们用令牌桶算法来控制访问API的速率，以此来防止服务被过载。我们会为每个用户分配一个令牌桶，每次用户发起请求时，都需要从令牌桶中取出一个令牌，如果令牌不足，则请求会被限流。至于压力测试，我们使用了JMeter和Gatling等工具，通过模拟用户访问来测试我们服务的极限性能和稳定性。

**面试官**: 好的，接下来我们聊聊**Redis**。你知道Redis的持久化有哪些方式，以及如何保证数据库和缓存的一致性吗？

**求职者**: Redis提供了两种主要的持久化方式，一种是RDB快照，另一种是AOF日志。为了保证数据库与缓存的一致性，我们可以采用延迟双删策略，在更新数据库的同时，先删除缓存，待数据库更新成功后，再次删除缓存。这样可以在大部分情况下保证数据的一致性。

**面试官**: 那Redis的**过期删除策略**和**定期删除默认检查间隔**是什么？

**求职者**: Redis的过期删除策略主要包括定时删除、惰性删除和定期删除。定时删除会在键到期时立即删除，惰性删除是在访问时发现键已过期才删除，而定期删除则是每隔一段时间随机检查一些键并删除到期的键。而定期删除的默认检查间隔是10秒钟。

**面试官**: 谈谈**Redis Cluster模式**的理解。

**求职者**: Redis Cluster是Redis的分布式解决方案，它允许我们在多个节点之间进行数据分片。每个节点存储数据的一部分，并且节点之间通过gossip协议进行通信。Redis Cluster还提供了数据的自动分片和高可用性，当一个节点失败时，其他节点可以接管其数据分片。

**面试官**: 既然提到分布式计算，你能谈谈你项目中**MapReduce的应用**和相关问题吗？

**求职者**: 在我们的项目中，我们使用MapReduce来处理大规模数据集。MapReduce工作的基本原理是将大的计算任务分解为小的块，然后在多个节点上并行处理。Map阶段进行数据分片和初步处理，Reduce阶段则进行数据汇总和最终处理。我们使用Hadoop框架来实现MapReduce，并解决了数据倾斜和资源调度等问题。

**面试官**: 非常好。现在我们切换到数据库领域。你对**MySQL的存储引擎**了解多少？特别是**InnoDB和MyISAM**的区别。

**求职者**: MySQL支持多种存储引擎，其中InnoDB和MyISAM是最常见的两种。InnoDB支持事务处理、行级锁定和外键，而MyISAM则不支持这些特性，它提供了全表锁定和较快的读取速度。如果是大量的插入操作，MyISAM可能会更好，因为它的插入速度通常比InnoDB快。

**面试官**: 那么，你能解释一下**MySQL的四种事务隔离级别**以及它们分别能解决哪些问题吗？

**求职者**: MySQL的四种事务隔离级别分别是读未提交、读已提交、可重复读和串行化。读未提交允许事务读取未提交的数据，可能会导致脏读。读已提交只允许读取已提交的数据，可以避免脏读。可重复读保证了在同一个事务中多次读取相同的数据结果是一致的，但可能会出现幻读。而串行化是最严格的隔离级别，它通过对读写操作加锁来避免脏读、不可重复读和幻读。在可重复读级别下，MySQL通过MVCC（多版本并发控制）来实现，但MVCC并不能解决所有的幻读问题，这通常需要通过Next-Key Locks来解决。

**面试官**: 关于数据结构，你知道**MySQL为什么使用B+树作为索引结构**吗？

**求职者**: MySQL使用B+树作为索引结构的一个主要原因是它能够保持数据的平衡和排序。B+树的特点是所有的值都存在于叶子节点上，并且叶子节点之间是相互链接的，这使得范围查询非常高效。另外，因为B+树的树高较低，相对于其他树结构，如二叉搜索树，它可以减少磁盘I/O操作，提高查询速度。

**面试官**: 在进行**索引优化时**，你会考虑使用全文索引吗？这是什么原理？

**求职者**: 在某些情况下，比如进行文本搜索时，我会考虑使用全文索引。全文索引是通过建立文档或者文本数据的反向索引来实现的，可以快速定位包含特定词汇的记录。MySQL中的全文索引通常用于MyISAM和InnoDB引擎，并且支持自然语言搜索和布尔搜索等功能。

**面试官**: 好，让我们转到网络层面。详细说说**TCP三次握手**的过程吗？

**求职者**: TCP三次握手的过程是建立一个可靠的连接所必需的。首先，客户端向服务器发送一个带有SYN标志的数据包，请求建立连接。服务器接收到这个数据包后，会回复一个带有SYN和ACK标志的数据包，以确认收到了客户端的请求。最后，客户端再发送一个带有ACK标志的数据包给服务器，以确认收到了服务器的确认。这样就完成了三次握手，双方可以开始通信了。

**面试官**: 非常好的解释。那么，你能列出一些**网络层的协议**，并解释一下**ICMP**的应用场景吗？

**求职者**: 网络层的协议包括IP、ICMP、ARP等。ICMP（Internet Control Message Protocol）是一个网络层协议，主要用于传输控制消息，比如网络拥塞、路由器指示等。一个典型的ICMP应用是ping命令，我们用它来测试网络连通性。

**面试官**: 那么**IP协议**是可靠的吗？**UDP**又适用于哪些场景？

**求职者**: IP协议并不是可靠的，它只是负责将数据包从源地址发送到目标地址，但不保证数据包一定能到达，也不保证顺序。因此，TCP在传输层对IP协议提供了可靠性的增强。而UDP（User Datagram Protocol）是一个不可靠的、无连接的协议，适用于那些对即时性要求高但不要求可靠传输的场景，比如视频会议和在线游戏。

**面试官**: 谈谈**TCP的拥塞控制**吧，它包括哪些机制？

**求职者**: TCP的拥塞控制包括四个主要的算法：慢启动、拥塞避免、快速重传和快速恢复。慢启动会从一个小的拥塞窗口开始，逐渐增加窗口大小来探测网络容量。拥塞避免则是在网络接近拥塞时减慢窗口增长的速度。快速重传会在接收到三个重复的ACK时重传丢失的数据包，而快速恢复会在重传后快速恢复发送窗口的大小。

**面试官**: 你能解释一下**TCP四次挥手**中的TIME_WAIT状态吗？

**求职者**: TCP四次挥手是用于终止一个TCP连接的过程。当一方准备关闭连接时，会发送一个FIN数据包给对方表示已经没有数据发送了，然后对方会回复一个ACK。然后，对方也会发送一个FIN数据包，等待本方的ACK。在发送最后一个ACK后，连接处于TIME_WAIT状态，这是为了确保最后一个ACK能够到达对方。如果对方没有收到ACK，它会重发FIN数据包。TIME_WAIT状态通常会持续2倍的MSL（Maximum Segment Lifetime）时间，以确保连接可靠地终止。

**面试官**: 好的，**I/O多路复用**是Linux中的什么机制？边缘触发和水平触发又有什么不同？

**求职者**: I/O多路复用是一种系统机制，允许一个进程监视多个文件描述符，一旦某个文件描述符就绪（例如，数据可读取或能够写入），它就能通知进程。在Linux中，select、poll和epoll都是实现这一机制的系统调用。边缘触发（ET）和水平触发（LT）是epoll的两种工作模式。水平触发会在文件描述符就绪时不断通知进程，而边缘触发只在文件描述符状态变化时通知一次，这要求进程能够一次性处理所有数据。

**面试官**: 那么，**epoll的性能一定比select和poll更好吗**？

**求职者**: 不一定。epoll的性能在处理大量并发连接时确实比select和poll更好，因为它不需要像select和poll那样每次调用都传递整个文件描述符集合。epoll使用事件通知机制和一个文件描述符就绪列表来提高效率。但是，在只有少量连接时，select和poll的性能差异可能并不明显。

**面试官**: 好，那你知道如何查看和修改**Linux系统中的文件描述符限制**吗？

**求职者**: 是的，我们可以使用ulimit命令来查看和修改文件描述符的限制。比如，`ulimit -n`可以查看当前shell进程的文件描述符限制，而`ulimit -n 1024`可以将其修改为1024。

**面试官**: 既然提到文件描述符，你能说说**socket和文件描述符之间的关系**吗？

**求职者**: 在Unix和类Unix系统中，socket也是一种文件描述符。操作系统通过文件描述符来代表所有的输入输出资源，包括普通文件、管道和网络连接。每个socket在创建时都会被分配一个文件描述符，应用程序可以像操作普通文件一样操作socket，使用read、write等系统调用。

**面试官**: 继续讨论Linux系统，你能说说如何**查看进程信息**，以及**ps命令的底层实现**是怎样的吗？ **

**求职者: 查看进程信息通常使用ps命令，例如ps aux可以显示系统中所有的进程信息。ps命令的底层实现会读取/proc文件系统中的信息，这个文件系统包含了系统中所有进程的详细信息，如进程ID、状态、内存使用情况等。当执行ps命令时，它会遍历/proc下的目录来收集和展示进程信息。 **

**面试官: 了解了。聊聊**进程间通信**，你认为哪种方式最快？ 

**求职者**: 在众多进程间通信（IPC）方法中，共享内存是最快的一种方式，因为它允许进程直接读写同一块内存区域，无需任何数据传输的开销。其他如管道、消息队列、信号量和套接字等IPC机制，都涉及到数据在用户空间和内核空间之间的复制，因此速度相对较慢。 

**面试官**: 那么，你能解释一下**信号**以及如何使用**kill命令**发送信号吗？ 

**求职者**: 信号是一种软件中断，用于通知进程发生了某个事件。在Unix系统中，我们可以使用kill命令来向进程发送信号。例如，kill -9 <pid>会向进程ID为<pid>的进程发送SIGKILL信号，强制终止该进程。kill命令实际上可以发送各种类型的信号，不仅仅是用于杀死进程。 

**面试官**: 在操作系统中，**用户态如何切换到内核态**？软中断是什么？ 

**求职者**: 用户态切换到内核态通常发生在进行系统调用或发生中断时。当应用程序执行系统调用，如读写文件，操作系统会通过中断门将控制权从用户态切换到内核态，以执行必要的内核级操作。软中断是一种由软件异常或显式请求引起的中断机制，它允许用户态代码触发内核态的处理流程。 

**面试官**: 非常详细。最后一个问题，你对**人工智能**了解吗？你是怎样看待它的？ 

**求职者**: 我对人工智能有一定的了解。我认为人工智能是一个非常有潜力的领域，它正在改变我们的生活和工作方式。通过学习和模拟人类智能，AI能够在数据分析、图像识别、自然语言处理等多个领域实现自动化和优化。不过，随着AI技术的发展，我们也需要注意到它的伦理和社会影响，确保技术的发展能够惠及社会。 

**面试官**: 很好，今天的面试就到这里。你的回答非常全面，感谢你的参与，我们会尽快给你反馈。现在有什么问题想要问我的吗？ 

**求职者**: 是的，我想了解一下，作为基础平台研发工程师，在蚂蚁金服所涉及的**Go业务场景**有哪些？比如在K8S容器化平台管理、AI集群训练、GPU运维管控平台开发方面，具体的工作内容是怎样的？ 

**面试官**: 在蚂蚁金服，Go业务场景非常丰富。在K8S容器化平台管理方面，我们主要通过Go来开发和优化平台的自动化部署、资源调度和服务监控等功能。对于AI集群训练，我们使用Go来构建高效的数据处理和模型训练管道。至于GPU运维管控平台，我们利用Go的并发特性来管理和监控大规模的GPU资源，确保计算任务的高性能执行。总的来说，作为基础平台研发工程师，你将有机会接触到最前沿的技术，并参与到核心的平台开发和优化工作中。 

**求职者**: 非常感谢您的解答，我对在蚂蚁金服工作充满期待。 

**面试官**: 我们也期待你的加入。再次感谢，希望你有一个愉快的一天。

# 蚂蚁一面面经
**时间：3.28 19:00-20:00**
**岗位：基础平台研发工程师-Golang/Python**
**部门：平台技术事业群-超级计算技术部**
**概述：1h，从项目到四大件，对OS考察较深，很多知识点需要融汇贯通，不然像我一样get不到考点**
项目部署上线的问题
Docker与虚拟机的区别
k8s有哪些组件
项目的令牌桶限流 压测
Redis持久化，如何保证数据库缓存一致性
Redis过期删除策略、定期删除默认检查间隔(10s)
Redis Cluster模式
项目MapReduce相关问题
MySQL引擎、InnoDB和MyISAM区别
大量插入下哪个引擎更好(MyISAM)
四种事务隔离级别、可重复读MVCC、能解决幻读吗
索引数据结构、为什么用B+树
索引优化，全文索引
TCP三次握手
网络层协议有哪些，ICMP应用
IP协议可靠吗，UDP应用场景
TCP拥塞控制
四次挥手的Time_wait
I/O多路复用，边缘水平触发
epoll性能一定更好吗
linux文件描述符大小、修改命令(ulimit)
socket和文件描述符的关系
Linux查看进程信息、ps底层实现
进程间通信方式，哪种方式最快
信号kill命令
用户态如何切换到内核态，软中断
对AI了解吗，有什么看法
反问：go业务场景：K8S容器化平台管理、AI集群训练、gpu运维管控平台开发

作者：池敖池恩
链接：[https://www.nowcoder.com/?type=818_1](https://www.nowcoder.com/?type=818_1)
来源：牛客网
